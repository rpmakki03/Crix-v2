(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[306],{9503:function(e,t,r){Promise.resolve().then(r.bind(r,9092))},4794:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},9474:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]])},1804:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},9092:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var a=r(7437),l=r(2265),s=r(4538),i=r(2267),c=r(279),n=r(5291),o=r(1804),d=r(9474),x=r(4794);function u(){let{user:e,userCards:t,removeCardFromCollection:r}=(0,i.a)(),[u,m]=(0,l.useState)(""),[h,f]=(0,l.useState)("all"),[g,p]=(0,l.useState)("all");if(!e)return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-foreground",children:"My Collection"}),(0,a.jsx)("p",{className:"text-xl text-muted-foreground",children:"Please connect your wallet or sign in to view your collection."})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-8 text-center",children:[(0,a.jsx)(o.Z,{className:"h-12 w-12 text-yellow-600 dark:text-yellow-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"Connect to View Collection"}),(0,a.jsx)("p",{className:"text-yellow-700 dark:text-yellow-300",children:"Please connect your wallet or sign in to view your cricket card collection."})]})]});let y=t.filter(e=>{let t=e.name.toLowerCase().includes(u.toLowerCase())||e.team.toLowerCase().includes(u.toLowerCase())||e.position.toLowerCase().includes(u.toLowerCase()),r="all"===h||e.rarity===h,a="all"===g||e.team===g;return t&&r&&a}),v=Array.from(new Set(t.map(e=>e.team))),j=t.length,N=t.filter(e=>"legendary"===e.rarity).length,w=t.filter(e=>"epic"===e.rarity).length,b=t.filter(e=>"rare"===e.rarity).length,k=t.filter(e=>"common"===e.rarity).length;return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-foreground",children:"My Collection"}),(0,a.jsx)("p",{className:"text-xl text-muted-foreground",children:"Your personal cricket card collection"})]}),(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(d.Z,{className:"h-6 w-6 text-primary"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-foreground",children:"Collection Statistics"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-primary",children:j}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Cards"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-500",children:N}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Legendary"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-500",children:w}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Epic"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-500",children:b}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Rare"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-500",children:k}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Common"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)(c.I,{placeholder:"Search your collection...",value:u,onChange:e=>m(e.target.value),className:"flex-1"}),(0,a.jsxs)(n.Ph,{value:h,onValueChange:f,children:[(0,a.jsx)(n.i4,{className:"w-full sm:w-48",children:(0,a.jsx)(n.ki,{placeholder:"Select rarity"})}),(0,a.jsxs)(n.Bw,{children:[(0,a.jsx)(n.Ql,{value:"all",children:"All Rarities"}),(0,a.jsx)(n.Ql,{value:"common",children:"Common"}),(0,a.jsx)(n.Ql,{value:"rare",children:"Rare"}),(0,a.jsx)(n.Ql,{value:"epic",children:"Epic"}),(0,a.jsx)(n.Ql,{value:"legendary",children:"Legendary"})]})]}),(0,a.jsxs)(n.Ph,{value:g,onValueChange:p,children:[(0,a.jsx)(n.i4,{className:"w-full sm:w-48",children:(0,a.jsx)(n.ki,{placeholder:"Select team"})}),(0,a.jsxs)(n.Bw,{children:[(0,a.jsx)(n.Ql,{value:"all",children:"All Teams"}),v.map(e=>(0,a.jsx)(n.Ql,{value:e,children:e},e))]})]})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",y.length," of ",j," cards"]}),y.length>0?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Your Cards"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:y.map((e,t)=>(0,a.jsxs)("div",{className:"animate-in slide-in-from-bottom-4 duration-500",style:{animationDelay:"".concat(100*t,"ms")},children:[(0,a.jsx)(s.CricketCard,{card:e}),(0,a.jsx)("button",{onClick:()=>r(e.id),className:"mt-2 w-full px-3 py-2 bg-destructive text-destructive-foreground rounded text-sm font-semibold hover:bg-destructive/90 transition-colors",children:"Remove"})]},"".concat(e.id,"-").concat(t)))})]}):(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-8 text-center",children:[(0,a.jsx)(x.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No Cards Yet"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"You haven't collected any cards yet. Start by opening some packs!"}),(0,a.jsxs)("a",{href:"/packs",className:"inline-flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 transition-colors",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5"}),"Open Packs"]})]})]})}},2267:function(e,t,r){"use strict";r.d(t,{UserProvider:function(){return n},a:function(){return o}});var a=r(7437),l=r(2265),s=r(6586),i=r(3448);let c=(0,l.createContext)(void 0);function n(e){let{children:t}=e,[r,n]=(0,l.useState)(null),[o,d]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=localStorage.getItem("crix_user");e&&n(JSON.parse(e))},[]),(0,l.useEffect)(()=>{if(r){let e=localStorage.getItem("crix_userCards_".concat(r.type,"_").concat(r.address||r.email||""));e?d(JSON.parse(e)):d([])}else d([])},[r]),(0,l.useEffect)(()=>{r&&localStorage.setItem("crix_userCards_".concat(r.type,"_").concat(r.address||r.email||""),JSON.stringify(o))},[r,o]),(0,l.useEffect)(()=>{let{data:e}=i.O.auth.onAuthStateChange((e,t)=>{t&&t.user?(n({type:"email",email:t.user.email}),localStorage.setItem("crix_user",JSON.stringify({type:"email",email:t.user.email}))):(n(null),localStorage.removeItem("crix_user"))});return()=>{e.subscription.unsubscribe()}},[]),(0,l.useEffect)(()=>{(async()=>{if(r&&"email"===r.type&&r.email){let{data:{user:e}}=await i.O.auth.getUser();if(e){let{data:t,error:r}=await i.O.from("user_cards").select("card_id").eq("user_id",e.id);!r&&t&&d(t.map(e=>s.JK.find(t=>t.id===e.card_id)).filter(Boolean))}}})()},[r]);let x=async e=>{if(d(t=>[...t,e]),r&&"email"===r.type&&r.email){let{data:{user:t}}=await i.O.auth.getUser();t&&await i.O.from("user_cards").insert({user_id:t.id,card_id:e.id})}},u=async e=>{if(d(t=>t.filter(t=>t.id!==e)),r&&"email"===r.type&&r.email){let{data:{user:t}}=await i.O.auth.getUser();t&&await i.O.from("user_cards").delete().eq("user_id",t.id).eq("card_id",e)}};return(0,a.jsx)(c.Provider,{value:{user:r,userCards:o,connectUser:(e,t)=>{let r={type:e,...t&&{address:t},..."email"===e&&t&&{email:t}};n(r),localStorage.setItem("crix_user",JSON.stringify(r));let a=localStorage.getItem("crix_userCards_".concat(e,"_").concat(t||""));a?d(JSON.parse(a)):d([])},disconnectUser:()=>{n(null),d([]),localStorage.removeItem("crix_user")},addCardToCollection:x,removeCardFromCollection:u},children:t})}function o(){let e=(0,l.useContext)(c);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}}},function(e){e.O(0,[855,341,404,971,117,744],function(){return e(e.s=9503)}),_N_E=e.O()}]);